# โปรเจกต์การเขียนโปรแกรม Pacman

<p align="center"><img src="pacman_game.png" width="50%"></p>

เป้าหมายของโปรเจกต์การเขียนโปรแกรมนี้คือการสร้างตัวแทนอัจฉริยะ (Intelligent Agents) สำหรับเกม Pacman โดยโปรเจกต์จะแบ่งออกเป็นสามส่วน:
- [โปรเจกต์ที่ 0](project0): คุณต้องสร้างตัวแทนค้นหา (Search Agent) เพื่อกินจุดอาหารทั้งหมดให้เร็วที่สุด
- [โปรเจกต์ที่ 1](project1): คุณต้องสร้างตัวแทน Minimax เพื่อกินจุดอาหารทั้งหมดให้เร็วที่สุด พร้อมหลีกเลี่ยงผีศัตรูที่กำลังไล่ตามคุณ
- [โปรเจกต์ที่ 2](project2): คุณต้องสร้าง Bayes Filter เพื่อติดตามตำแหน่งของผีที่มองไม่เห็นทั้งหมด

## การติดตั้ง

> คำแนะนำด้านล่างนี้ได้รับการทดสอบใน Windows, Linux และ MacOS

เราแนะนำให้ติดตั้งสภาพแวดล้อม Python (3) โดยใช้ตัวจัดการแพ็กเกจ `conda` วิธีที่ง่ายที่สุดคือการติดตั้ง [Miniconda](https://docs.conda.io/en/latest/miniconda.html) คุณยังต้องมีโปรแกรมแก้ไขโค้ดที่รองรับ Python หากคุณยังไม่มี ลองพิจารณาโปรแกรมเหล่านี้: [Sublime Text](https://www.sublimetext.com/), [VS Code](https://code.visualstudio.com/), [Vim](https://www.vim.org/), ...

เมื่อติดตั้ง Miniconda เรียบร้อยแล้ว ให้เปิด Anaconda prompt (Windows) หรือ terminal (Linux/MacOS)

### การตั้งค่า

สร้างสภาพแวดล้อม `pacman` เปิดใช้งาน และติดตั้งไลบรารีที่จำเป็น:

```console
$ conda create --name pacman python=3.8
$ conda activate pacman
$ conda install numpy
```

จากนี้ไป เราจะสันนิษฐานว่าคุณได้เปิดใช้งาน `pacman` แล้ว

### การใช้งาน

- `--agent`: เริ่มเกมด้วยตัวแทน Pacman ที่ผู้ใช้กำหนด
    ```console
    $ python run.py --agent humanagent
    ```

- `--ghost`: เริ่มเกมด้วยตัวแทนผีที่ผู้ใช้กำหนด (`dumby`, `greedy`, `smarty` หรือ `eastrandy`)
    ```console
    $ python run.py --ghost dumby
    ```

- `--layout`: เริ่มเกมด้วยเลย์เอาต์เขาวงกตที่ผู้ใช้กำหนด (ดูไดเรกทอรี `pacman_module/layouts`)
    ```console
    $ python run.py --layout medium
    ```

- `--nographics`: ปิดการใช้งานอินเตอร์เฟซผู้ใช้แบบกราฟิก
    ```console
    $ python run.py --agent dfs --nographics
    ```

## คำแนะนำ

ทุกส่วน (1 และ 2) ของโปรเจกต์ต้องทำเป็นกลุ่มสูงสุด 2 คน คุณต้องใช้กลุ่มเดียวกันตลอดทุกส่วน สำหรับแต่ละส่วน ให้ส่งผ่าน https://forms.gle/EfBqfEUzHTugzctp7 ด้วยบัญชี `google account` ของคุณ และส่งสิ่งที่ขอตามที่กำหนด อย่าลืมเพิ่มสมาชิกกลุ่มอื่นๆ ในการส่งแต่ละครั้ง

เราอนุญาตให้ **ส่งช้าได้เพียงครั้งเดียวสูงสุด 24 ชั่วโมง** เช่น หากคุณส่งส่วนแรกช้า จะไม่อนุญาตให้ส่งช้าอีกในส่วนอื่นๆ ในกรณีที่ *ส่งช้ามากกว่าหนึ่งครั้ง* ส่วนที่เกี่ยวข้องจะได้รับคะแนน *0/20*

## ข้อผิดพลาดทั่วไปและแนวปฏิบัติที่ไม่ดี

เราแสดงผ่านส่วนนี้รายการข้อผิดพลาดทั่วไปและแนวปฏิบัติที่ไม่ดีที่เราได้สังเกตเห็นจากโปรเจกต์ในอดีต แม้ว่าส่วนนี้จะไม่ครบถ้วนและอาจมีการอัปเดตเป็นประจำ เราหวังว่ารายการต่อไปนี้จะช่วยให้คุณหลีกเลี่ยงข้อผิดพลาดหลายประการที่อาจส่งผลเสียต่อคุณภาพของโปรเจกต์

### สไตล์/เอกสาร

* โค้ดต้นฉบับไม่เป็นไปตาม PEP-8 การปฏิบัติตามข้อกำหนดที่จำเป็นช่วยให้อ่านโค้ดต้นฉบับของคุณได้ง่ายขึ้น แนวทาง PEP-8 มีให้ที่ [Style Guide for Python Code](https://www.python.org/dev/peps/pep-0008/) คุณสามารถใช้ [สคริปต์](https://pypi.org/project/pycodestyle/) เฉพาะเพื่อตรวจสอบความสอดคล้องกับ PEP-8 ของโค้ดต้นฉบับ

* ข้อกำหนดของฟังก์ชันผิดพลาดหรือหายไป ต้องมีและต้อง **อธิบายอย่างเป็นทางการ** ให้ฟังก์ชันชัดเจนไม่คลุมเครือ จุดประสงค์คือให้คำอธิบายฟังก์ชันที่เข้าใจง่ายกว่าโค้ดเอง ตัวอย่างข้อกำหนดที่ถูกต้องแสดงด้านล่าง:
    ```python
    def fibonacci(n):
        """คำนวณสมาชิกลำดับที่ n ของลำดับฟีโบนัชชี
        คำจำกัดความแบบเรียกตัวเอง:
            f(0) = 0, f(1) = 1, f(n) = f(n-1) + f(n-2) สำหรับ n > 1

        Arguments:
            n: ดัชนีบวกของลำดับฟีโบนัชชี

        Returns:
            สมาชิกลำดับที่ n ของลำดับฟีโบนัชชี
        """

        if n <= 1:
            return n

        return fibonacci(n-1) + fibonacci(n-2)
    ```

* ตัวแปรและฟังก์ชันไม่ได้ตั้งชื่อตามความหมาย โค้ดต้นฉบับที่มีชื่อตามความหมายเป้าหมายอ่านง่ายกว่าและอาจต้องการคอมเมนต์น้อยกว่าเพื่อให้อ่านได้

* คอมเมนต์ไม่มีข้อมูล ยาวเกินไป หรือหายไป คอมเมนต์สำคัญในการจัดโครงสร้างโค้ดและให้ข้อมูลเชิงลึกระดับสูงว่าส่วนต่างๆ ของโค้ดมีปฏิสัมพันธ์กันอย่างไร และว่าโค้ดต้นฉบับทำงานอย่างไรจริงๆ (มีประโยชน์สำหรับการปรับปรุงประสิทธิภาพเป็นต้น) ต้องมีคำน้อยและตรงประเด็น

### การดำเนินการ

* การดำเนินการอัลกอริทึมไม่ถูกต้อง มักเกิดจากการละเมิดข้อกำหนดใดๆ ของอัลกอริทึม หรือการดำเนินการคำชี้แจงปัญหาไม่ถูกต้อง เช่น การทดสอบเป้าหมายที่ผิดให้กับอัลกอริทึม ตรวจสอบให้แน่ใจว่าคุณเข้าใจคำชี้แจงปัญหาที่ต้องอธิบายและอัลกอริทึมที่ต้องดำเนินการ

* มั่นใจเกินไปในความถูกต้องของการดำเนินการโดยการทดสอบในชุดย่อยเล็กๆ ของอินสแตนซ์ปัญหา แม้ว่าการทดสอบจะมีประโยชน์ในการตรวจหาข้อผิดพลาดในการดำเนินการ แต่ไม่สามารถกำจัดทั้งหมดได้ แม้ว่าการดำเนินการของคุณจะ "ทำงาน" ในอินสแตนซ์บางส่วนของคำชี้แจงปัญหา และแม้ว่าคุณจะได้รับการสนับสนุนให้ทำการทดสอบดังกล่าว คุณต้องตรวจสอบการดำเนินการของคุณอย่างระมัดระวัง ซึ่งรวมถึง 1) ความถูกต้องของข้อมูลนำเข้าที่ให้กับอัลกอริทึมเทียบกับคำชี้แจงปัญหา และ 2) การปฏิบัติตามข้อกำหนดอัลกอริทึมในการดำเนินการของคุณ

* ประสิทธิภาพต่ำระหว่างการดำเนินการ ต้องใช้เวลาเพียงไม่กี่วินาทีในกรณีที่เลวร้ายที่สุดในการแก้ปัญหาแต่ละอินสแตนซ์ที่เราให้ในโปรเจกต์ แม้ว่าคุณควรมีการดำเนินการที่ใช้งานได้ก่อน คุณควรระมัดระวังในการจำกัดเวลาคำนวณให้ต่ำกว่าไม่กี่วินาทีนี้

* ข้อผิดพลาดการนำเข้าและกรณีขอบ เช่น ดัชนีนอกขอบเขต แม้ว่าข้อผิดพลาดการพิมพ์ในส่วนการนำเข้าจะไม่เป็นอันตรายต่อความถูกต้องของการดำเนินการ - ตราบใดที่มีไฟล์ที่จำเป็น - มักจะยากสำหรับผู้อ่านในการตัดสินใจว่าข้อผิดพลาดกรณีขอบเป็นข้อผิดพลาดการพิมพ์หรือเป็นส่วนหนึ่งของการดำเนินการที่ไม่ถูกต้อง นโยบายที่ปลอดภัยที่สุดคือหลังนี้ เราอ้างอิงถึงเมื่อประเมินงานของคุณ

## คำถามที่พบบ่อย

### คะแนนเกม

ฟังก์ชันคะแนนของเกมคำนวณดังนี้:

```
คะแนน = 10 * #จำนวนจุดอาหารที่กิน
      - 5 * #จำนวนแคปซูลที่กิน
      + 200 * #จำนวนผีที่กิน
      - 1 * #จำนวนขั้นตอนเวลา
      - 500 ถ้าแพ้
      + 500 ถ้าชนะ
```

เราขอให้คุณสร้างตัวแทนที่ชนะเกมและเพิ่มคะแนนให้สูงสุด

โปรดทราบว่าคุณควรถามตัวเองว่าฟังก์ชันคะแนนนี้เป็นไปตามคุณสมบัติทั้งหมดของอัลกอริทึมการค้นหาที่คุณจะดำเนินการหรือไม่ หากไม่ คุณสามารถแก้ไขได้ตราบใดที่วิธีแก้ปัญหาที่เหมาะสมที่สุดยังคงเหมือนเดิม

### API

คุณต้องสร้างตัวแทนของคุณเป็นคลาส `PacmanAgent` ตามแม่แบบของ `pacmanagent.py`
หัวใจของอัลกอริทึมควรดำเนินการหรือเรียกภายในเมธอด `get_action` เมธอดนี้รับสถานะปัจจุบัน `s` ของเกมและควรส่งคืนการกระทำที่จะทำ

เมธอดที่มีประโยชน์ของสถานะระบุด้านล่าง:

- `s.generatePacmanSuccessors()`: ส่งคืนรายการคู่ของสถานะตัวสำเร็จและการเคลื่อนไหวจากสถานะปัจจุบัน `s` สำหรับตัวแทน pacman
    * เมธอดนี้ **ต้อง** ถูกเรียกสำหรับการขยายโหนดใดๆ สำหรับตัวแทน pacman
- `s.generateGhostSuccessors(agentIndex)`: ส่งคืนรายการคู่ของสถานะตัวสำเร็จและการเคลื่อนไหวจากสถานะปัจจุบัน `s` สำหรับตัวแทนผีที่จัดดัชนีโดย `agentIndex>0`
    * เมธอดนี้ **ต้อง** ถูกเรียกสำหรับการขยายโหนดใดๆ สำหรับตัวแทนผี
- `s.getLegalActions(agentIndex)`: ส่งคืนรายการการเคลื่อนไหวที่ถูกกฎหมายจากสถานะ `s` และตัวแทนที่จัดดัชนีโดย `agentIndex` 0 คือตัวแทน Pacman เสมอ
- `s.getPacmanPosition()`: ส่งคืนตำแหน่ง Pacman ในคู่ `(x,y)`
- `s.getScore()`: ส่งคืนคะแนนรวมของสถานะ (ตามที่นิยามด้านบน)
- `s.getFood()`: ส่งคืนเมทริกซ์บูลีนที่ให้ตำแหน่งของจุดอาหารทั้งหมด
- `s.getNumFood()`: ส่งคืนสเกลาร์ที่ให้จำนวนจุดอาหารที่เหลือ
- `s.getWalls()`: ส่งคืนเมทริกซ์บูลีนที่ให้ตำแหน่งของกำแพงทั้งหมด
- `s.getGhostPosition(agentIndex)`: ส่งคืนตำแหน่งของตัวแทนผีที่จัดดัชนีโดย `agentIndex>0`
- `s.getGhostDirection(agentIndex)`: ส่งคืนทิศทางของตัวแทนผีที่จัดดัชนีโดย `agentIndex>0`
- `s.getCapsules()`: ส่งคืนรายการตำแหน่งของแคปซูลที่เหลือในเขาวงกต
- `s.isWin()`: ส่งคืน `True` หากสถานะอยู่ใน *การจบแบบชนะ*
- `s.isLose()`: ส่งคืน `True` หากสถานะอยู่ใน *การจบแบบแพ้*

ตัวอย่างการดำเนินการให้ใน `humanagent.py` และ `randomagent.py`

### การเคลื่อนไหวที่ผิดกฎหมาย

คุณต้องตรวจสอบให้แน่ใจว่าตัวแทนของคุณส่งคืนการเคลื่อนไหวที่ถูกกฎหมายเสมอ หากไม่เป็นเช่นนั้น การเคลื่อนไหวก่อนหน้าจะถูกทำซ้ำหากยังถูกกฎหมาย มิฉะนั้น จะอยู่ในตำแหน่งเดิม

### คำถามเกี่ยวกับโปรเจกต์

จุดประสงค์ของโปรเจกต์คือให้คุณมีโอกาสได้วิธีการปฏิบัติของแนวคิดหลักของหลักสูตร อย่างไรก็ตาม คุณอาจติดขัดระหว่างการทำงาน แม้ว่าเราจะยินดีช่วยคุณหาทางแก้ไขปัญหาต่างๆ ความเกี่ยวข้องของคำแนะนำของเราขึ้นอยู่กับความเฉพาะเจาะจงของคำถามของคุณ ซึ่งหมายความว่าคุณได้ลองแก้ปัญหาอย่างน้อยโดยอ้างอิงถึงการบรรยาย

คุณอาจส่งคำถามไปที่ **ittipon@g.sut.ac.th** topic " project0" คุณยังสามารถพบเราที่สำนักงานในวันพุธ 12:00-14:00 น. (Arnaud Delaunoy, R.103)

หากช่วงเวลาเหล่านี้ไม่เหมาะกับคุณ ส่งอีเมลเพื่อนัดหมาย เมื่อส่งอีเมล ให้แน่ใจว่าได้เสนอช่วงเวลาไม่กี่ช่วงแล้ว เวลาเหล่านี้อาจอยู่นอกช่วงงานที่กล่าวข้างต้น อย่ารอสองสามวันก่อนกำหนด**สุดท้าย**เพื่อเริ่มโปรเจกต์และ/หรือถามคำถาม และควรตระหนักว่าเราไม่สามารถรับประกันการตอบคำถามนอกเวลาทำงาน

## เครดิต

โปรเจกต์การเขียนโปรแกรมดัดแปลงมาจาก [CS188 (UC Berkeley)]